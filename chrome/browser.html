<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Pretty Good Plugin (Menu)</title>

    <!-- Local CSS -->
    <link rel="stylesheet/less" type="text/css" href="css/browser.less">

    <!-- Vendors JS -->
    <script src="./bower_components/pathjs/path.min.js"></script>
    <script src="./bower_components/sightglass/index.js"></script>
    <script src="./bower_components/rivets/dist/rivets.js"></script>
    <script src="./bower_components/openpgp/dist/openpgp.min.js"></script>
    <script src="./bower_components/less/dist/less.js"></script>

    <!-- Code -->
    <script src="src/modules.js"></script>
    <script src="src/browser.js"></script>
  </head>
  <body>
    <div class="error" rv-if="error" rv-text="error"></div>

    <div rv-show="hasPrivateKey">
      <div id="password" rv-hide="isDecrypted">
        <div class="center">
          <input rv-value="password" rv-on-keyup="enterPassword" type="password" placeholder="private key password">
        </div>
      </div>

      <div id="main" rv-show="isDecrypted">
        <div class="menu">
            <ul id="tabs">
              <li><a rv-on-click="lock" href="#">Lock</a></li>
              <li><a rv-on-click="goSettings" href="#">Settings</a></li>
              <li><a rv-on-click="goSettings" href="#">Address Book</a></li>
            </ul>
        </div>
        <article>
          <div id="encrypt-tab">
            <div rv-hide="alreadyEncrypted">
              <div rv-show="clearText">
                <div class="error" rv-show="error">{ error }</div>
                <label for="filter">Search address book:</label>
                <input class="filter" rv-value="filter" rv-on-keyup="doFilter" placeholder="name or email">
                <ul class="found-keys" rv-show="hasFoundKeys < foundKeys">
                  <li rv-on-click="addPublicKey" rv-each-key="foundKeys"><span>{ key.getPrimaryUser }</span></li>
                </ul>
                <div class="bottom" rv-show="hasSelectedKeys < selectedKeys">
                  <label>Encrypt for:</label>
                  <ul class="selected-keys">
                    <li rv-each-key="selectedKeys"><div class="name">{ key.getPrimaryUser }</div><div class="remove" rv-on-click="removePublicKey">x</div></li>
                  </ul>
                  <button rv-on-click="sendMessage">encrypt</button>
                </div>
              </div>
              <div rv-hide="clearText">
                No entered text or selection detected.
              </div>
            </div>
            <div rv-show="alreadyEncrypted" class="middle">
              <p>This message has already been encrypted.</p>
              <button rv-on-click="restoreMessage">Restore original message</button>
            </div>
          </div>
        </article>
      </div>
    </div><!-- hasPrivateKey -->

    <div id="no-key" rv-hide="hasPrivateKey">
      <span class="middle">
        <p>You have not created or imported your PGP key yet.</p>
        <button rv-on-click="goSettings">Setup</button>
      </span>

    </div><!-- not hasPrivateKey -->

  </body>
</html>
