<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Browser-2-Browser Crypt</title>

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/browser.css">

    <!-- Vendors JS -->
    <script src="./bower_components/rivets/dist/rivets.bundled.min.js"></script>
    <script src="./bower_components/openpgp/dist/openpgp.min.js"></script>

    <!-- Code -->
    <script src="src/modules.js"></script>
    <script src="src/browser.js"></script>
  </head>
  <body>
    <div class="error" rv-if="error" rv-text="error"></div>
    <nav>
      <div class="logo pull-left">short link pgp</div>
      <ul id="tabs" class="pull-right">
        <li rv-show="isDecrypted"><a rv-on-click="lock" href="#"><i class="fa fa-lock"></i> lock</a></li>
        <li><a rv-on-click="goSettings" href="#"><i class="fa fa-cog"></i> settings</a></li>
      </ul>
    </nav>

    <div class="screen" rv-hide="hasPrivateKey">
      <span class="middle">
        <p>You have not created or imported your PGP key yet.</p>
        <button class="button" rv-on-click="goSettings">Setup</button>
      </span>
    </div><!-- !hasPrivateKey -->

    <div rv-show="hasPrivateKey">
      <div class="screen" rv-hide="isDecrypted">
        <div class="middle">
          <input id="pwd" rv-value="password" rv-on-keyup="enterPassword" type="password" placeholder="private key password">
        </div>
      </div>

      <div id="main" rv-show="isDecrypted">
        <article>
          <div rv-hide="alreadyEncrypted">
            <div class="clear-text">
              <label>Text:</label>
              <textarea rv-value="clearText"></textarea>
            </div>
            <div rv-show="clearText">
              <label for="filter">Recepients:</label>
              <ul class="selected-keys" rv-on-click="focusFilter">
                <li class="bead" rv-each-key="selectedKeys"><div class="name">{ key.getPrimaryUser }</div><div class="remove" rv-on-click="removePublicKey">âœ–</div></li>
                <li><input id="ftr" class="filter" rv-value="filter" rv-on-keyup="doFilter"></li>
              </ul>
              <ul class="found-keys" rv-show="hasFoundKeys < foundKeys">
                <li rv-on-click="addPublicKey" rv-each-key="foundKeys"><span>{ key.getPrimaryUser }</span></li>
              </ul>
            </div><!-- clearText -->
            <div class="bottom">
              <span rv-show="clearText">
                <button rv-show="hasSelectedKeys < selectedKeys" class="button" rv-disabled="wait" rv-on-click="sendMessage">Encrypt Message <span rv-show="wait"><i class="fa fa-cog fa-spin"></i></span></button>
              </span>
              <button rv-hide="clearText" rv-on-click="sendPublicKey" class="button">Share My Public Key</button>
            </div><!-- .bottom -->
          </div><!-- !alreadyEncrypted -->
          <div rv-show="alreadyEncrypted" class="middle">
            <p>This message has already been encrypted.</p>
            <button class="button" rv-on-click="restoreMessage">Restore original message</button>
          </div><!-- alreadyEncrypted -->
        </article><!-- #encrypted-tab -->
      </div><!-- #main -->
    </div><!-- hasPrivateKey -->
  </body>
</html>
