<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Short Link Privacy</title>

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/slp.css">
    <link rel="stylesheet" href="css/browser.css">

    <!-- Vendors JS -->
    <script src="./bower_components/rivets/dist/rivets.bundled.min.js"></script>
    <script src="./bower_components/openpgp/dist/openpgp.min.js"></script>

    <!-- Code -->
    <script src="src/modules.js"></script>
    <script src="src/browser.js"></script>

    <!-- Components -->
    <script type="text/template" id="exp-tmpl">
      <span class="expiration">
        <a rv-on-click="toggle" rv-hide="show">expiration</a>
        <small rv-show="show">
          <select rv-value="value" rv-on-change="change">
            <option value="3600">1 hour</option>
            <option value="86400">1 day</option>
            <option value="604800">7 day</option>
            <option value="2592000">30 days</option>
            <option value="0">no expiration</option>
          </select>
        </small>
      </span>
    </script>

    <script type="text/template" id="rcp-tmpl">
      <label for="filter">Recepients:</label>
      <ul class="selected-keys" rv-on-click="focus">
        <li class="bead" rv-each-key="data.keys"><div class="name">{ key.getPrimaryUser }</div><div class="remove" rv-on-click="remove">âœ–</div></li>
        <li><input id="ftr" class="filter" rv-value="filter" rv-on-keyup="search"></li>
      </ul>
      <ul class="found-keys" rv-show="hasFound < found">
        <li rv-on-click="add" rv-each-key="found"><span>{ key.getPrimaryUser }</span></li>
      </ul>
    </script>

  </head>
  <body>
    <div id="container">
      <div class="error" rv-if="error" rv-text="error"></div>
      <nav>
        <div class="logo pull-left">short link privacy</div>
        <ul id="tabs" class="pull-right">
          <li rv-show="isDecrypted"><a rv-on-click="lock" href="#"><i class="icon-lock"></i>lock</a></li>
          <li><a rv-on-click="goSettings" href="#"><i class="icon-cog"></i>settings</a></li>
        </ul>
      </nav>

      <div class="middle short" rv-hide="hasPrivateKey">
        <p>You have not created or imported your PGP key yet.</p>
        <button class="button" rv-on-click="goSettings">Setup</button>
      </div><!-- !hasPrivateKey -->

      <div rv-show="hasPrivateKey">
        <div class="middle short" rv-hide="isDecrypted">
          <input id="pwd" rv-value="password" rv-on-keyup="enterPassword" type="password" placeholder="private key password">
        </div>

        <article rv-show="isDecrypted">
          <div rv-hide="alreadyEncrypted">
            <div class="clear-text">
              <label>Text:</label>
              <textarea rv-value="clearText"></textarea>
            </div>
            <div rv-show="clearText">
              <recepients keys="selectedKeys"></recepients>
            </div><!-- clearText -->
            <div class="bottom">
              <span rv-show="clearText">
                <span rv-show="hasSelectedKeys < selectedKeys">
                  <button class="button" rv-disabled="wait" rv-on-click="sendMessage">Encrypt Message <span rv-show="wait"><i class="icon-spin5"></i></span></button>
                  <expiration value="expiration"></expiration>
                </span>
              </span>
              <span rv-hide="clearText">
                <button rv-on-click="sendPublicKey" rv-disabled="wait" class="button">Share My Public Key <span rv-show="wait"><i class="icon-spin5"></i></span></button>
              </span>
            </div><!-- .bottom -->
          </div><!-- !alreadyEncrypted -->
          <div rv-show="alreadyEncrypted" class="middle">
            <p>This message has already been encrypted.</p>
            <button class="button" rv-on-click="restoreMessage">Restore original message</button>
          </div><!-- alreadyEncrypted -->
        </article><!-- #encrypted-tab -->

      </div><!-- hasPrivateKey -->
    </div><!-- #container -->
  </body>
</html>
