<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Browser-2-Browser Crypt</title>

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet/less" type="text/css" href="css/browser.less">

    <!-- Vendors JS -->
    <script src="./bower_components/sightglass/index.js"></script>
    <script src="./bower_components/rivets/dist/rivets.js"></script>
    <script src="./bower_components/openpgp/dist/openpgp.min.js"></script>
    <script src="./bower_components/less/dist/less.js"></script>

    <!-- Code -->
    <script src="src/modules.js"></script>
    <script src="src/browser.js"></script>
  </head>
  <body>
    <div class="error" rv-if="error" rv-text="error"></div>

    <div rv-show="hasPrivateKey">
      <div id="password" rv-hide="isDecrypted">
        <div class="middle">
          <input rv-value="password" rv-on-keyup="enterPassword" type="password" placeholder="private key password">
        </div>
      </div>

      <div id="main" rv-show="isDecrypted">
        <div class="menu">
          <div class="logo pull-left">b2b crypt</div>
          <ul id="tabs" class="pull-right">
            <li><a rv-on-click="lock" href="#"><i class="fa fa-lock"></i> lock</a></li>
            <li><a rv-on-click="goSettings" href="#"><i class="fa fa-cog"></i> settings</a></li>
          </ul>
        </div><!-- .menu -->
        <div id="encrypt-tab">
          <div rv-hide="alreadyEncrypted">
            <div>
              <div class="clear-text">
                <label>Text</label>
                <textarea rv-value="clearText"></textarea>
              </div>
              <div rv-show="clearText">
                <div class="encrypt-for">
                  <label for="filter">Encrypt for</label>
                  <input rv-value="filter" rv-on-keyup="doFilter" placeholder="search address book">
                </div>
                <ul class="found-keys" rv-show="hasFoundKeys < foundKeys">
                  <li rv-on-click="addPublicKey" rv-each-key="foundKeys"><span>{ key.getPrimaryUser }</span></li>
                </ul>
                <div class="bottom" rv-show="hasSelectedKeys < selectedKeys">
                  <ul class="selected-keys">
                    <li rv-each-key="selectedKeys"><div class="name">{ key.getPrimaryUser }</div><div class="remove" rv-on-click="removePublicKey"><i class="fa fa-times"></i></div></li>
                  </ul>
                  <button class="button" rv-on-click="sendMessage">generate link</button>
                </div>
              </div>
            </div>
          </div><!-- !alreadyEncrypted -->
          <div rv-show="alreadyEncrypted" class="middle">
            <p>This message has already been encrypted.</p>
            <button rv-on-click="restoreMessage">Restore original message</button>
          </div><!-- alreadyEncrypted -->
        </div><!-- #encrypted-tab -->
      </div><!-- #main -->
    </div><!-- hasPrivateKey -->

    <div id="no-key" rv-hide="hasPrivateKey">
      <span class="middle">
        <p>You have not created or imported your PGP key yet.</p>
        <button rv-on-click="goSettings">Setup</button>
      </span>
    </div><!-- !hasPrivateKey -->

  </body>
</html>
